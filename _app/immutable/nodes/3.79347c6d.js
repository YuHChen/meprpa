import{r as oe,s as F,n as j,e as ie}from"../chunks/scheduler.e108d1fd.js";import{d as O,S as L,i as P,g as w,s as I,h as $,j as B,B as N,c as S,f as k,k as b,a as M,x as m,z as U,C as ne,m as V,n as J,o as le,r as K,u as Y,v as G,t as Q,w as W}from"../chunks/index.47f5ee31.js";import{w as re}from"../chunks/index.0378bb41.js";function X(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ce(s,e){s.d(1),e.delete(s.key)}function fe(s,e,t,a,o,n,f,i,d,c,l,p){let h=s.length,y=n.length,g=h;const x={};for(;g--;)x[s[g].key]=g;const r=[],u=new Map,_=new Map,C=[];for(g=y;g--;){const v=p(o,n,g),R=t(v);let E=f.get(R);E?a&&C.push(()=>E.p(v,e)):(E=c(R,v),E.c()),u.set(R,r[g]=E),R in x&&_.set(R,Math.abs(g-x[R]))}const q=new Set,z=new Set;function T(v){O(v,1),v.m(i,l),f.set(v.key,v),l=v.first,y--}for(;h&&y;){const v=r[y-1],R=s[h-1],E=v.key,D=R.key;v===R?(l=v.first,h--,y--):u.has(D)?!f.has(E)||q.has(E)?T(v):z.has(D)?h--:_.get(E)>_.get(D)?(z.add(E),T(v)):(q.add(D),h--):(d(R,f),h--)}for(;h--;){const v=s[h];u.has(v.key)||d(v,f)}for(;y;)T(r[y-1]);return oe(C),r}function H(s,e){const t=s.get(e);if(typeof t=="string")return t;throw Error(`Expected string for \`${e}\` in form data.`)}function Z(s){return`yuhchen.github.io/meprpa::${s}`}const ae={getItem:s=>localStorage.getItem(Z(s)),setItem:(s,e)=>{localStorage.setItem(Z(s),e)}},A=(()=>{const s=JSON.parse(ae.getItem("recipeBooks")??"[]"),{subscribe:e,set:t,update:a}=re(s);return{subscribe:e,push:o=>a(n=>{const{id:f}=o;if(n.some(i=>i.id===f))throw new Error(`Recipe book with id \`${f}\` already exists.`);return[...n,o]}),remove:o=>a(n=>{const f=n.findIndex(i=>i.id===o);return f>-1&&n.splice(f,1),n}),reset:()=>t([])}})();A.subscribe(s=>ae.setItem("recipeBooks",JSON.stringify(s)));function ee(s){let e,t;return{c(){e=w("p"),t=V(s[0]),this.h()},l(a){e=$(a,"P",{class:!0});var o=B(e);t=J(o,s[0]),o.forEach(k),this.h()},h(){b(e,"class","error svelte-1wmrbjm")},m(a,o){M(a,e,o),m(e,t)},p(a,o){o&1&&le(t,a[0])},d(a){a&&k(e)}}}function ue(s){let e,t,a="Add a recipe book",o,n,f=`<label class="svelte-1wmrbjm">Spreadsheet ID:
      <input name="id" required="" class="svelte-1wmrbjm"/></label> <label class="svelte-1wmrbjm">Name:
      <input name="name" class="svelte-1wmrbjm"/></label> <button class="svelte-1wmrbjm">Add recipe book</button>`,i,d,c,l=s[0]&&ee(s);return{c(){e=w("div"),t=w("h2"),t.textContent=a,o=I(),n=w("form"),n.innerHTML=f,i=I(),l&&l.c(),this.h()},l(p){e=$(p,"DIV",{class:!0});var h=B(e);t=$(h,"H2",{"data-svelte-h":!0}),N(t)!=="svelte-1qehulj"&&(t.textContent=a),o=S(h),n=$(h,"FORM",{class:!0,"data-svelte-h":!0}),N(n)!=="svelte-iebvgh"&&(n.innerHTML=f),i=S(h),l&&l.l(h),h.forEach(k),this.h()},h(){b(n,"class","svelte-1wmrbjm"),b(e,"class","svelte-1wmrbjm")},m(p,h){M(p,e,h),m(e,t),m(e,o),m(e,n),m(e,i),l&&l.m(e,null),d||(c=U(n,"submit",ne(s[1])),d=!0)},p(p,[h]){p[0]?l?l.p(p,h):(l=ee(p),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:j,o:j,d(p){p&&k(e),l&&l.d(),d=!1,c()}}}function he(s,e,t){let a;function o(n){t(0,a=void 0);const f=new FormData(n.target),i=H(f,"id"),d={id:i,name:H(f,"name")||i};try{A.push(d)}catch(c){c instanceof Error&&t(0,a=c.message)}}return[a,o]}class de extends L{constructor(e){super(),P(this,e,he,ue,F,{})}}function te(s,e,t){const a=s.slice();return a[2]=e[t],a}function se(s,e){let t,a,o,n,f,i,d=e[2].name+"",c,l,p,h,y,g;return{key:s,first:null,c(){t=w("li"),a=w("form"),o=w("input"),f=I(),i=w("span"),c=V(d),l=I(),p=w("button"),h=I(),this.h()},l(x){t=$(x,"LI",{class:!0});var r=B(t);a=$(r,"FORM",{class:!0});var u=B(a);o=$(u,"INPUT",{type:!0,name:!0,class:!0}),f=S(u),i=$(u,"SPAN",{class:!0});var _=B(i);c=J(_,d),_.forEach(k),l=S(u),p=$(u,"BUTTON",{"aria-label":!0,class:!0}),B(p).forEach(k),u.forEach(k),h=S(r),r.forEach(k),this.h()},h(){b(o,"type","hidden"),b(o,"name","id"),o.value=n=e[2].id,b(o,"class","svelte-1xqhwf4"),b(i,"class","svelte-1xqhwf4"),b(p,"aria-label","Remove recipe book"),b(p,"class","svelte-1xqhwf4"),b(a,"class","svelte-1xqhwf4"),b(t,"class","svelte-1xqhwf4"),this.first=t},m(x,r){M(x,t,r),m(t,a),m(a,o),m(a,f),m(a,i),m(i,c),m(a,l),m(a,p),m(t,h),y||(g=U(a,"submit",ne(e[1])),y=!0)},p(x,r){e=x,r&1&&n!==(n=e[2].id)&&(o.value=n),r&1&&d!==(d=e[2].name+"")&&le(c,d)},d(x){x&&k(t),y=!1,g()}}}function me(s){let e,t,a="Your recipe books",o,n,f,i,d,c,l=[],p=new Map,h,y,g=X(s[0]);const x=r=>r[2].id;for(let r=0;r<g.length;r+=1){let u=te(s,g,r),_=x(u);p.set(_,l[r]=se(_,u))}return{c(){e=w("div"),t=w("h2"),t.textContent=a,o=I(),n=w("button"),f=V("Remove All Recipe Books"),d=I(),c=w("ul");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=$(r,"DIV",{class:!0});var u=B(e);t=$(u,"H2",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1i50hpx"&&(t.textContent=a),o=S(u),n=$(u,"BUTTON",{class:!0});var _=B(n);f=J(_,"Remove All Recipe Books"),_.forEach(k),d=S(u),c=$(u,"UL",{class:!0});var C=B(c);for(let q=0;q<l.length;q+=1)l[q].l(C);C.forEach(k),u.forEach(k),this.h()},h(){b(t,"class","svelte-1xqhwf4"),n.disabled=i=s[0].length===0,b(n,"class","svelte-1xqhwf4"),b(c,"class","svelte-1xqhwf4"),b(e,"class","svelte-1xqhwf4")},m(r,u){M(r,e,u),m(e,t),m(e,o),m(e,n),m(n,f),m(e,d),m(e,c);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(c,null);h||(y=U(n,"click",A.reset),h=!0)},p(r,[u]){u&1&&i!==(i=r[0].length===0)&&(n.disabled=i),u&3&&(g=X(r[0]),l=fe(l,u,x,1,r,g,p,c,ce,se,null,te))},i:j,o:j,d(r){r&&k(e);for(let u=0;u<l.length;u+=1)l[u].d();h=!1,y()}}}function pe(s,e,t){let a;ie(s,A,n=>t(0,a=n));function o(n){const f=new FormData(n.target),i=H(f,"id");A.remove(i)}return[a,o]}class ve extends L{constructor(e){super(),P(this,e,pe,me,F,{})}}function _e(s){let e,t,a="Manage Recipe Books",o,n,f,i,d;return n=new de({}),i=new ve({}),{c(){e=w("div"),t=w("h1"),t.textContent=a,o=I(),K(n.$$.fragment),f=I(),K(i.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var l=B(e);t=$(l,"H1",{"data-svelte-h":!0}),N(t)!=="svelte-1h09ywt"&&(t.textContent=a),o=S(l),Y(n.$$.fragment,l),f=S(l),Y(i.$$.fragment,l),l.forEach(k),this.h()},h(){b(e,"class","svelte-1pgwcil")},m(c,l){M(c,e,l),m(e,t),m(e,o),G(n,e,null),m(e,f),G(i,e,null),d=!0},p:j,i(c){d||(O(n.$$.fragment,c),O(i.$$.fragment,c),d=!0)},o(c){Q(n.$$.fragment,c),Q(i.$$.fragment,c),d=!1},d(c){c&&k(e),W(n),W(i)}}}class $e extends L{constructor(e){super(),P(this,e,null,_e,F,{})}}export{$e as component};
