import{r as ie,s as L,n as D,e as re}from"../chunks/scheduler.e108d1fd.js";import{d as H,S as V,i as q,g,s as C,h as w,j as B,B as F,c as j,f as $,k as v,a as O,x as d,z as J,C as ne,m as z,n as K,o as ae,r as Y,u as G,v as Q,t as W,w as X}from"../chunks/index.47f5ee31.js";import{w as ce}from"../chunks/index.0378bb41.js";function Z(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ue(l,e){l.d(1),e.delete(l.key)}function fe(l,e,t,a,o,s,r,c,h,i,n,k){let u=l.length,R=s.length,_=u;const E={};for(;_--;)E[l[_].key]=_;const f=[],p=new Map,b=new Map,M=[];for(_=R;_--;){const m=k(o,s,_),y=t(m);let I=r.get(y);I?a&&M.push(()=>I.p(m,e)):(I=i(y,m),I.c()),p.set(y,f[_]=I),y in E&&b.set(y,Math.abs(_-E[y]))}const x=new Set,A=new Set;function S(m){H(m,1),m.m(c,n),r.set(m.key,m),n=m.first,R--}for(;u&&R;){const m=f[R-1],y=l[u-1],I=m.key,T=y.key;m===y?(n=m.first,u--,R--):p.has(T)?!r.has(I)||x.has(I)?S(m):A.has(T)?u--:b.get(I)>b.get(T)?(A.add(I),S(m)):(x.add(T),u--):(h(y,r),u--)}for(;u--;){const m=l[u];p.has(m.key)||h(m,r)}for(;R;)S(f[R-1]);return ie(M),f}function P(l,e){const t=l.get(e);if(typeof t=="string")return t;throw Error(`Expected string for \`${e}\` in form data.`)}function ee(l){return`yuhchen.github.io/meprpa::${l}`}const oe={getItem:l=>localStorage.getItem(ee(l)),setItem:(l,e)=>{localStorage.setItem(ee(l),e)}},N=(()=>{const l=JSON.parse(oe.getItem("recipeBooks")??"[]"),{subscribe:e,set:t,update:a}=ce(l);return{subscribe:e,push:o=>a(s=>{const{id:r}=o;if(s.some(c=>c.id===r))throw new Error(`Recipe book with id \`${r}\` already exists.`);return[...s,o]}),remove:o=>a(s=>{const r=s.findIndex(c=>c.id===o);return r>-1&&s.splice(r,1),s}),reset:()=>t([])}})();N.subscribe(l=>oe.setItem("recipeBooks",JSON.stringify(l)));function te(l){let e,t;return{c(){e=g("p"),t=z(l[0]),this.h()},l(a){e=w(a,"P",{class:!0});var o=B(e);t=K(o,l[0]),o.forEach($),this.h()},h(){v(e,"class","error svelte-1wmrbjm")},m(a,o){O(a,e,o),d(e,t)},p(a,o){o&1&&ae(t,a[0])},d(a){a&&$(e)}}}function me(l){let e,t,a="Add a recipe book",o,s,r=`<label class="svelte-1wmrbjm">Spreadsheet ID:
      <input name="id" required="" class="svelte-1wmrbjm"/></label> <label class="svelte-1wmrbjm">Name:
      <input name="name" class="svelte-1wmrbjm"/></label> <button class="svelte-1wmrbjm">Add recipe book</button>`,c,h,i,n=l[0]&&te(l);return{c(){e=g("div"),t=g("h2"),t.textContent=a,o=C(),s=g("form"),s.innerHTML=r,c=C(),n&&n.c(),this.h()},l(k){e=w(k,"DIV",{class:!0});var u=B(e);t=w(u,"H2",{"data-svelte-h":!0}),F(t)!=="svelte-1qehulj"&&(t.textContent=a),o=j(u),s=w(u,"FORM",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-iebvgh"&&(s.innerHTML=r),c=j(u),n&&n.l(u),u.forEach($),this.h()},h(){v(s,"class","svelte-1wmrbjm"),v(e,"class","svelte-1wmrbjm")},m(k,u){O(k,e,u),d(e,t),d(e,o),d(e,s),d(e,c),n&&n.m(e,null),h||(i=J(s,"submit",ne(l[1])),h=!0)},p(k,[u]){k[0]?n?n.p(k,u):(n=te(k),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:D,o:D,d(k){k&&$(e),n&&n.d(),h=!1,i()}}}function de(l,e,t){let a;function o(s){t(0,a=void 0);const r=new FormData(s.target),c=P(r,"id"),h={id:c,name:P(r,"name")||c};try{N.push(h)}catch(i){i instanceof Error&&t(0,a=i.message)}}return[a,o]}class he extends V{constructor(e){super(),q(this,e,de,me,L,{})}}function se(l,e,t){const a=l.slice();return a[2]=e[t],a}function le(l,e){let t,a,o,s=e[2].name+"",r,c,h,i,n,k,u,R,_,E,f,p,b,M,x,A;return{key:l,first:null,c(){t=g("li"),a=g("div"),o=g("span"),r=z(s),c=C(),h=g("form"),i=g("input"),k=C(),u=g("button"),R=C(),_=g("form"),E=g("input"),p=C(),b=g("button"),M=C(),this.h()},l(S){t=w(S,"LI",{class:!0});var m=B(t);a=w(m,"DIV",{class:!0});var y=B(a);o=w(y,"SPAN",{class:!0});var I=B(o);r=K(I,s),I.forEach($),c=j(y),h=w(y,"FORM",{action:!0,class:!0});var T=B(h);i=w(T,"INPUT",{type:!0,name:!0,class:!0}),k=j(T),u=w(T,"BUTTON",{class:!0,"aria-label":!0}),B(u).forEach($),T.forEach($),R=j(y),_=w(y,"FORM",{class:!0});var U=B(_);E=w(U,"INPUT",{type:!0,name:!0,class:!0}),p=j(U),b=w(U,"BUTTON",{class:!0,"aria-label":!0}),B(b).forEach($),U.forEach($),y.forEach($),M=j(m),m.forEach($),this.h()},h(){v(o,"class","svelte-1bmmf4u"),v(i,"type","hidden"),v(i,"name","id"),i.value=n=e[2].id,v(i,"class","svelte-1bmmf4u"),v(u,"class","edit svelte-1bmmf4u"),v(u,"aria-label","Edit recipe book"),v(h,"action","/recipebook"),v(h,"class","svelte-1bmmf4u"),v(E,"type","hidden"),v(E,"name","id"),E.value=f=e[2].id,v(E,"class","svelte-1bmmf4u"),v(b,"class","remove svelte-1bmmf4u"),v(b,"aria-label","Remove recipe book"),v(_,"class","svelte-1bmmf4u"),v(a,"class","svelte-1bmmf4u"),v(t,"class","svelte-1bmmf4u"),this.first=t},m(S,m){O(S,t,m),d(t,a),d(a,o),d(o,r),d(a,c),d(a,h),d(h,i),d(h,k),d(h,u),d(a,R),d(a,_),d(_,E),d(_,p),d(_,b),d(t,M),x||(A=J(_,"submit",ne(e[1])),x=!0)},p(S,m){e=S,m&1&&s!==(s=e[2].name+"")&&ae(r,s),m&1&&n!==(n=e[2].id)&&(i.value=n),m&1&&f!==(f=e[2].id)&&(E.value=f)},d(S){S&&$(t),x=!1,A()}}}function pe(l){let e,t,a="Your recipe books",o,s,r,c,h,i,n=[],k=new Map,u,R,_=Z(l[0]);const E=f=>f[2].id;for(let f=0;f<_.length;f+=1){let p=se(l,_,f),b=E(p);k.set(b,n[f]=le(b,p))}return{c(){e=g("div"),t=g("h2"),t.textContent=a,o=C(),s=g("button"),r=z("Remove All Recipe Books"),h=C(),i=g("ul");for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){e=w(f,"DIV",{class:!0});var p=B(e);t=w(p,"H2",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1i50hpx"&&(t.textContent=a),o=j(p),s=w(p,"BUTTON",{class:!0});var b=B(s);r=K(b,"Remove All Recipe Books"),b.forEach($),h=j(p),i=w(p,"UL",{class:!0});var M=B(i);for(let x=0;x<n.length;x+=1)n[x].l(M);M.forEach($),p.forEach($),this.h()},h(){v(t,"class","svelte-1bmmf4u"),s.disabled=c=l[0].length===0,v(s,"class","svelte-1bmmf4u"),v(i,"class","svelte-1bmmf4u"),v(e,"class","svelte-1bmmf4u")},m(f,p){O(f,e,p),d(e,t),d(e,o),d(e,s),d(s,r),d(e,h),d(e,i);for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(i,null);u||(R=J(s,"click",N.reset),u=!0)},p(f,[p]){p&1&&c!==(c=f[0].length===0)&&(s.disabled=c),p&3&&(_=Z(f[0]),n=fe(n,p,E,1,f,_,k,i,ue,le,null,se))},i:D,o:D,d(f){f&&$(e);for(let p=0;p<n.length;p+=1)n[p].d();u=!1,R()}}}function ve(l,e,t){let a;re(l,N,s=>t(0,a=s));function o(s){const r=new FormData(s.target),c=P(r,"id");N.remove(c)}return[a,o]}class _e extends V{constructor(e){super(),q(this,e,ve,pe,L,{})}}function be(l){let e,t,a="Manage Recipe Books",o,s,r,c,h;return s=new he({}),c=new _e({}),{c(){e=g("div"),t=g("h1"),t.textContent=a,o=C(),Y(s.$$.fragment),r=C(),Y(c.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0});var n=B(e);t=w(n,"H1",{"data-svelte-h":!0}),F(t)!=="svelte-1h09ywt"&&(t.textContent=a),o=j(n),G(s.$$.fragment,n),r=j(n),G(c.$$.fragment,n),n.forEach($),this.h()},h(){v(e,"class","svelte-1pgwcil")},m(i,n){O(i,e,n),d(e,t),d(e,o),Q(s,e,null),d(e,r),Q(c,e,null),h=!0},p:D,i(i){h||(H(s.$$.fragment,i),H(c.$$.fragment,i),h=!0)},o(i){W(s.$$.fragment,i),W(c.$$.fragment,i),h=!1},d(i){i&&$(e),X(s),X(c)}}}class $e extends V{constructor(e){super(),q(this,e,null,be,L,{})}}export{$e as component};
