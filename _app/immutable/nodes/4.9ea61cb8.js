import{r as oe,s as L,n as D,e as re}from"../chunks/scheduler.e108d1fd.js";import{d as H,S as P,i as V,g as k,s as x,h as $,j as I,B as F,c as M,f as y,k as p,a as N,x as h,z as q,C as le,m as J,n as z,o as ne,r as K,u as Y,v as G,t as Q,w as W}from"../chunks/index.47f5ee31.js";import{w as ie}from"../chunks/index.0378bb41.js";function X(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ce(l,e){l.d(1),e.delete(l.key)}function ue(l,e,t,a,o,s,c,f,d,r,n,b){let i=l.length,_=s.length,g=i;const C={};for(;g--;)C[l[g].key]=g;const u=[],m=new Map,w=new Map,A=[];for(g=_;g--;){const v=b(o,s,g),B=t(v);let E=c.get(B);E?a&&A.push(()=>E.p(v,e)):(E=r(B,v),E.c()),m.set(B,u[g]=E),B in C&&w.set(B,Math.abs(g-C[B]))}const R=new Set,S=new Set;function j(v){H(v,1),v.m(f,n),c.set(v.key,v),n=v.first,_--}for(;i&&_;){const v=u[_-1],B=l[i-1],E=v.key,O=B.key;v===B?(n=v.first,i--,_--):m.has(O)?!c.has(E)||R.has(E)?j(v):S.has(O)?i--:w.get(E)>w.get(O)?(S.add(E),j(v)):(R.add(O),i--):(d(B,c),i--)}for(;i--;){const v=l[i];m.has(v.key)||d(v,c)}for(;_;)j(u[_-1]);return oe(A),u}function U(l,e){const t=l.get(e);if(typeof t=="string")return t;throw Error(`Expected string for \`${e}\` in form data.`)}function Z(l){return`yuhchen.github.io/meprpa::${l}`}const ae={getItem:l=>localStorage.getItem(Z(l)),setItem:(l,e)=>{localStorage.setItem(Z(l),e)}},T=(()=>{const l=JSON.parse(ae.getItem("recipeBooks")??"[]"),{subscribe:e,set:t,update:a}=ie(l);return{subscribe:e,push:o=>a(s=>{const{id:c}=o;if(s.some(f=>f.id===c))throw new Error(`Recipe book with id \`${c}\` already exists.`);return[...s,o]}),remove:o=>a(s=>{const c=s.findIndex(f=>f.id===o);return c>-1&&s.splice(c,1),s}),reset:()=>t([])}})();T.subscribe(l=>ae.setItem("recipeBooks",JSON.stringify(l)));function ee(l){let e,t;return{c(){e=k("p"),t=J(l[0]),this.h()},l(a){e=$(a,"P",{class:!0});var o=I(e);t=z(o,l[0]),o.forEach(y),this.h()},h(){p(e,"class","error svelte-1wmrbjm")},m(a,o){N(a,e,o),h(e,t)},p(a,o){o&1&&ne(t,a[0])},d(a){a&&y(e)}}}function fe(l){let e,t,a="Add a recipe book",o,s,c=`<label class="svelte-1wmrbjm">Spreadsheet ID:
      <input name="id" required="" class="svelte-1wmrbjm"/></label> <label class="svelte-1wmrbjm">Name:
      <input name="name" class="svelte-1wmrbjm"/></label> <button class="svelte-1wmrbjm">Add recipe book</button>`,f,d,r,n=l[0]&&ee(l);return{c(){e=k("div"),t=k("h2"),t.textContent=a,o=x(),s=k("form"),s.innerHTML=c,f=x(),n&&n.c(),this.h()},l(b){e=$(b,"DIV",{class:!0});var i=I(e);t=$(i,"H2",{"data-svelte-h":!0}),F(t)!=="svelte-1qehulj"&&(t.textContent=a),o=M(i),s=$(i,"FORM",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-iebvgh"&&(s.innerHTML=c),f=M(i),n&&n.l(i),i.forEach(y),this.h()},h(){p(s,"class","svelte-1wmrbjm"),p(e,"class","svelte-1wmrbjm")},m(b,i){N(b,e,i),h(e,t),h(e,o),h(e,s),h(e,f),n&&n.m(e,null),d||(r=q(s,"submit",le(l[1])),d=!0)},p(b,[i]){b[0]?n?n.p(b,i):(n=ee(b),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:D,o:D,d(b){b&&y(e),n&&n.d(),d=!1,r()}}}function me(l,e,t){let a;function o(s){t(0,a=void 0);const c=new FormData(s.target),f=U(c,"id"),d={id:f,name:U(c,"name")||f};try{T.push(d)}catch(r){r instanceof Error&&t(0,a=r.message)}}return[a,o]}class de extends P{constructor(e){super(),V(this,e,me,fe,L,{})}}function te(l,e,t){const a=l.slice();return a[2]=e[t],a}function se(l,e){let t,a,o,s=e[2].name+"",c,f,d,r,n,b,i,_,g,C,u,m,w,A;return{key:l,first:null,c(){t=k("li"),a=k("div"),o=k("span"),c=J(s),f=x(),d=k("form"),r=k("button"),b=x(),i=k("form"),_=k("input"),C=x(),u=k("button"),m=x(),this.h()},l(R){t=$(R,"LI",{class:!0});var S=I(t);a=$(S,"DIV",{class:!0});var j=I(a);o=$(j,"SPAN",{class:!0});var v=I(o);c=z(v,s),v.forEach(y),f=M(j),d=$(j,"FORM",{action:!0,class:!0});var B=I(d);r=$(B,"BUTTON",{class:!0,"aria-label":!0}),I(r).forEach(y),B.forEach(y),b=M(j),i=$(j,"FORM",{class:!0});var E=I(i);_=$(E,"INPUT",{type:!0,name:!0,class:!0}),C=M(E),u=$(E,"BUTTON",{class:!0,"aria-label":!0}),I(u).forEach(y),E.forEach(y),j.forEach(y),m=M(S),S.forEach(y),this.h()},h(){p(o,"class","svelte-1bmmf4u"),p(r,"class","edit svelte-1bmmf4u"),p(r,"aria-label","Edit recipe book"),p(d,"action",n="/recipebook/"+e[2].id),p(d,"class","svelte-1bmmf4u"),p(_,"type","hidden"),p(_,"name","id"),_.value=g=e[2].id,p(_,"class","svelte-1bmmf4u"),p(u,"class","remove svelte-1bmmf4u"),p(u,"aria-label","Remove recipe book"),p(i,"class","svelte-1bmmf4u"),p(a,"class","svelte-1bmmf4u"),p(t,"class","svelte-1bmmf4u"),this.first=t},m(R,S){N(R,t,S),h(t,a),h(a,o),h(o,c),h(a,f),h(a,d),h(d,r),h(a,b),h(a,i),h(i,_),h(i,C),h(i,u),h(t,m),w||(A=q(i,"submit",le(e[1])),w=!0)},p(R,S){e=R,S&1&&s!==(s=e[2].name+"")&&ne(c,s),S&1&&n!==(n="/recipebook/"+e[2].id)&&p(d,"action",n),S&1&&g!==(g=e[2].id)&&(_.value=g)},d(R){R&&y(t),w=!1,A()}}}function he(l){let e,t,a="Your recipe books",o,s,c,f,d,r,n=[],b=new Map,i,_,g=X(l[0]);const C=u=>u[2].id;for(let u=0;u<g.length;u+=1){let m=te(l,g,u),w=C(m);b.set(w,n[u]=se(w,m))}return{c(){e=k("div"),t=k("h2"),t.textContent=a,o=x(),s=k("button"),c=J("Remove All Recipe Books"),d=x(),r=k("ul");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){e=$(u,"DIV",{class:!0});var m=I(e);t=$(m,"H2",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1i50hpx"&&(t.textContent=a),o=M(m),s=$(m,"BUTTON",{class:!0});var w=I(s);c=z(w,"Remove All Recipe Books"),w.forEach(y),d=M(m),r=$(m,"UL",{class:!0});var A=I(r);for(let R=0;R<n.length;R+=1)n[R].l(A);A.forEach(y),m.forEach(y),this.h()},h(){p(t,"class","svelte-1bmmf4u"),s.disabled=f=l[0].length===0,p(s,"class","svelte-1bmmf4u"),p(r,"class","svelte-1bmmf4u"),p(e,"class","svelte-1bmmf4u")},m(u,m){N(u,e,m),h(e,t),h(e,o),h(e,s),h(s,c),h(e,d),h(e,r);for(let w=0;w<n.length;w+=1)n[w]&&n[w].m(r,null);i||(_=q(s,"click",T.reset),i=!0)},p(u,[m]){m&1&&f!==(f=u[0].length===0)&&(s.disabled=f),m&3&&(g=X(u[0]),n=ue(n,m,C,1,u,g,b,r,ce,se,null,te))},i:D,o:D,d(u){u&&y(e);for(let m=0;m<n.length;m+=1)n[m].d();i=!1,_()}}}function pe(l,e,t){let a;re(l,T,s=>t(0,a=s));function o(s){const c=new FormData(s.target),f=U(c,"id");T.remove(f)}return[a,o]}class ve extends P{constructor(e){super(),V(this,e,pe,he,L,{})}}function _e(l){let e,t,a="Manage Recipe Books",o,s,c,f,d;return s=new de({}),f=new ve({}),{c(){e=k("div"),t=k("h1"),t.textContent=a,o=x(),K(s.$$.fragment),c=x(),K(f.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=I(e);t=$(n,"H1",{"data-svelte-h":!0}),F(t)!=="svelte-1h09ywt"&&(t.textContent=a),o=M(n),Y(s.$$.fragment,n),c=M(n),Y(f.$$.fragment,n),n.forEach(y),this.h()},h(){p(e,"class","svelte-1pgwcil")},m(r,n){N(r,e,n),h(e,t),h(e,o),G(s,e,null),h(e,c),G(f,e,null),d=!0},p:D,i(r){d||(H(s.$$.fragment,r),H(f.$$.fragment,r),d=!0)},o(r){Q(s.$$.fragment,r),Q(f.$$.fragment,r),d=!1},d(r){r&&y(e),W(s),W(f)}}}class ke extends P{constructor(e){super(),V(this,e,null,_e,L,{})}}export{ke as component};
